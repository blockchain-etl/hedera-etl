# Hedera ETL
Hedera ETL populates BigQuery dataset with transactions and records generated by the Hedera Mainnet (or Testnet, if so configured).
- Extract: Stream of transactions (and records) are ingested from a GCP PubSub topic
- Transform: Filters for important fields, formats data types, etc
- Load: Streaming insert into BigQuery dataset

For more details, see [design doc](docs/design/1_hedera_etl.md)

## Creating BigQuery table

Schema for BigQuery table to store Hedera transactions is in [schema.json](schema.json) file.

Use `bq` CLI to create the table
```bash
bq mk \
  --table \
  --description "Hedera network transactions" \
  --time_partitioning_field consensusTimestampTruncated \
  --time_partitioning_type DAY \
  --clustering_fields transactionType \
  project_id:dataset.table_name \
  schema.json
```
